<div class=" wizard-content">

    <dx-data-grid class="table row-border hover" [dataSource]="premDirectorsDetailsData" keyExpr="id" (onToolbarPreparing)="onPremisesDirectorsToolbar($event,'')">
        
        <dxo-paging [enabled]="true">
        </dxo-paging>
        <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
        </dxo-pager>
        <dxo-export [enabled]="true" fileName="premDirectorsDetailsData" [allowExportSelectedData]="true"></dxo-export>

        <dxo-selection mode="multiple"></dxo-selection>
        <dxo-group-panel [visible]="true"></dxo-group-panel>
        <dxi-column [width]="200" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
            <div *dxTemplate="let data of 'cellTemplate'">
                <dx-button text="Edit" (click)="funcEditPersonnelDetails(data)" 
                    type="danger" icon="edit">
                    </dx-button> 
                <dx-button text="Delete" (click)="funcDeleteDirectorsDetails(data)" 
                    type="danger" icon="delete">
                </dx-button> 
            </div>
        </dxi-column>
        <dxi-column dataField="director_first_name"></dxi-column>
        <dxi-column dataField="director_last_name"></dxi-column>
        <dxi-column dataField="director_email_address"></dxi-column>
        <dxi-column dataField="director_telephone_no"></dxi-column>
        <dxi-column dataField="designation"></dxi-column>
    </dx-data-grid>
</div>


<dx-popup class="popup"  [width]="funcpopWidth(80)" [showTitle]="true" title="Directors Details" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isBusinessPersonnelPopupVisible">
    <div *dxTemplate="let data of 'content'" class="row">
        <dx-scroll-view></dx-scroll-view>
        <div class="col-lg-12">
            <wizard style="background: #fff !important; height: 100% !important;">
                <wizard-step stepTitle=" Directors Details" class="wizardStep-height">
                    <form role="form" enctype="multipart/form-data" role="form" [formGroup]="premisesDirectorsDetailsfrm" class="col-lg-12" (ngSubmit)="onSavePremisesDirectorsDetails()">
                        <div class="row wizard-contentwin">
                        <div class="col-lg-4 row input-group ">
                            <div class="col-lg-8">
                                <label class="control-label">Initial Name</label>
                                <dx-text-box formControlName="director_first_name"  placeholder="Initial Name" [showClearButton]="true">
                                </dx-text-box>
                            </div>
                            <div class="col-lg-4 no-padding">
                                <dx-button  [elementAttr]="{ class: 'btn btn-primary pull-left'}" style="margin-top:25px  !important;"  text="Search Staff Details"  type="default" (onClick)="onSearchStaffDetails()">
                                 <i class="fa fa-search"></i>Search Director Details
                                 </dx-button>
                            </div>
                        </div>
                            <div class="col-lg-4">
                                <label class="control-label">Middle Name</label>
                                <dx-text-box formControlName="director_middle_name"  placeholder="Director Name" [showClearButton]="true">
                                </dx-text-box>
                            </div>                            <div class="col-lg-4">
                                <label class="control-label">Last Name</label>
                                <dx-text-box formControlName="director_last_name"  placeholder="Last Name" [showClearButton]="true">
                                </dx-text-box>
                            </div>
                            <div class="col-lg-4">
                                <label class="control-label">Telephone No</label>
                                <dx-text-box formControlName="director_telephone_no" placeholder="Telephone" [showClearButton]="true">
                                </dx-text-box>
                            </div>
                            <div class="col-lg-4">
                                <label class="control-label">Email Address</label>
                                <dx-text-box formControlName="director_email_address"  placeholder="Email" [showClearButton]="true">
                                </dx-text-box>
                            </div>
                            <div class="col-lg-4">
                                <label>Designation</label>
                                <dx-select-box [dataSource]="qualificationsData" valueExpr="id" placeholder="Qualification" displayExpr="name" [searchEnabled]="true" formControlName="designation_id">
                                </dx-select-box>
                            </div>
                            <div class="col-lg-4">
                                <label class="control-label">Country</label>
                                <dx-select-box [dataSource]="countries" valueExpr="id" displayExpr="name" placeholder="Select Country" (onSelectionChanged)="onCoutryCboSelect($event)" [searchEnabled]="true" formControlName="country_id">
                                 </dx-select-box>
                            </div>
                            <div class="col-lg-4">
                                <label for="ti" class="control-label">Region</label>
                                <dx-select-box  [dataSource]="regions" valueExpr="id" 
                                    displayExpr="name" (onSelectionChanged)="onRegionsCboSelect($event)" [searchEnabled]="true" formControlName="region_id">
                                </dx-select-box>
                            </div>
                            <div class="col-lg-4">
                                <label for="ti" class="control-label">District</label>
                                <dx-select-box [dataSource]="districts" valueExpr="id" 
                                    placeholder="Select District" displayExpr="name" [searchEnabled]="true" formControlName="district_id" (onSelectionChanged)="oDistrictsCboSelect($event)" >
                                </dx-select-box>
                            </div>      
                            <div class="col-lg-4">
                                <label for="ti" class="control-label">Postal Address</label>
                                <dx-text-box  formControlName="director_postal_address" placeholder="Postal Address" [showClearButton]="true">
                                </dx-text-box>
                                </div>
                            <div class="col-lg-12">
                                <input type="hidden" formControlName="id" />
                            </div>
                        </div>
                        <div style="border-top: 1px solid #ccc; min-height: 100px !important;">
                           
                            <dx-button text="Save Directors Details" [disabled]="!premisesDirectorsDetailsfrm.valid" (onClick)="onSavePremisesDirectorsDetails()" type="success" class="btn" icon="save" [elementAttr]="{ class: 'btn btn-primary; pull-right' }">
                            </dx-button>
                        </div>
                    </form>
                </wizard-step>
            </wizard>
        </div>
    </div>
</dx-popup>

<dx-popup class="popup"  [width]="funcpopWidth(60)" [height]="450" [showTitle]="true" title=" Directors Details"
    [dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="isDirectorsPopupVisible">
    <div *dxTemplate="let data of 'content'">
          <dx-data-grid class="table row-border hover" [remoteOperations]='true'  [allowColumnResizing]="true"  [columnHidingEnabled]="true" 
                    [dataSource]="directorsDetailsData"  keyExpr="id">
                    <dxo-filter-row [visible]="false"></dxo-filter-row>
                    <dxo-search-panel [visible]="true">
                    </dxo-search-panel>
                    <dxo-paging [enabled]="true">
                    </dxo-paging>
                    <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
                    </dxo-pager>
                    <dxo-export [enabled]="true" fileName="premDirectorsDetailsData" [allowExportSelectedData]="true"></dxo-export>
                    
                    <dxo-group-panel [visible]="true"></dxo-group-panel>
                    <dxi-column [width]="140" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false"
                      cellTemplate="cellTemplate">
                      <div *dxTemplate="let data of 'cellTemplate'">
                        <a (click)="funcSelectDirectorsDetails(data)" class="action-btn"><i class="fa fa-edit"></i>Select Directors Details</a>&nbsp;
                      </div>
                    </dxi-column>
                    <dxi-column [groupIndex]="1" dataField="directors_first_name"></dxi-column>
                    <dxi-column dataField="director_last_name"></dxi-column>
                    <dxi-column dataField="country"></dxi-column>
                    <dxi-column dataField="region"></dxi-column>
                    <dxi-column dataField="district"></dxi-column>
                    <dxi-column dataField="director_physical_address"></dxi-column>
                    <dxi-column dataField="director_postal_address"></dxi-column>
                    <dxi-column dataField="director_email_address"></dxi-column>
                    
          </dx-data-grid>
      </div>
  </dx-popup>
 
