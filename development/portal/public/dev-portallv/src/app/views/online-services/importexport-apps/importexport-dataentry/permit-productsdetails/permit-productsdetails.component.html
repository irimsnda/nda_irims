
<div class="row wizard-content">
  <div class="col-lg-12" *ngIf="sub_module_id == 12">
    <dx-data-grid [dataSource]="permitProductsData" [wordWrapEnabled]="true"  (onToolbarPreparing)="onPermitProductGridToolbar($event)"  [allowColumnResizing]="true" [columnHidingEnabled]="false" 
    [showBorders]="true">
    <dxo-filter-row [visible]="false"></dxo-filter-row>
    <dxo-search-panel [visible]="true">
    </dxo-search-panel>
    <dxo-paging [enabled]="true">
    </dxo-paging>
    <dxo-selection mode="single"></dxo-selection>
    <dxi-column [width]="150" caption="Action(Edit/Delete)" name="command-editing" [allowFiltering]="false"
      [allowSorting]="false" cellTemplate="cellTemplate">
      <div *dxTemplate="let data of 'cellTemplate'">
       
        <dx-menu (onItemClick)="permitProductsActionColClick($event,data)" [items]="permitProductMenuItems">

        </dx-menu>
      </div>
    </dxi-column>
    <dxi-column [width]="200" caption="Action" name="command-editing" [allowFiltering]="false"
      [allowSorting]="false" cellTemplate="cellTemplate2">
      <div *dxTemplate="let data of 'cellTemplate2'">
        <dx-button text="Uploads(Certificates)"  (click)="funcDownloadUploadedDocuments(data.data)" 
        type="success" icon="download" [elementAttr]="{ class: 'btn btn-primary' }">
        </dx-button>
      </div>
    </dxi-column>
    <dxi-column dataField="brand_name" caption="Brand Name"></dxi-column>
    <dxi-column dataField="quantity"></dxi-column>
    <dxi-column dataField="packaging_units"></dxi-column>
    <dxi-column dataField="unitpack_size" caption="Pack Size"></dxi-column>
    <dxi-column dataField="currency_name"></dxi-column>
    <dxi-column dataField="unit_price"></dxi-column>
    <dxi-column dataField="total_value" caption="FOB Value"></dxi-column>
    <dxo-paging [enabled]="true">
    </dxo-paging>
    <dxo-summary>
      <dxi-total-item
          column="total_value"
          summaryType="sum">
      </dxi-total-item>
  </dxo-summary>
    <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
    </dxo-pager>
    <dxo-export [enabled]="true" fileName="permitProducts" [allowExportSelectedData]="true"></dxo-export>
  </dx-data-grid>

  </div>


  
  <div class="col-lg-12" *ngIf="sub_module_id == 78  || sub_module_id == 81">
    <dx-data-grid [dataSource]="permitProductsData"  [wordWrapEnabled]="true"  (onToolbarPreparing)="onPermitProductGridToolbar($event)"  [allowColumnResizing]="true" [columnHidingEnabled]="false" 
    [showBorders]="true">
    <dxo-filter-row [visible]="false"></dxo-filter-row>
    <dxo-search-panel [visible]="true">
    </dxo-search-panel>
    <dxo-paging [enabled]="true">
    </dxo-paging>
    <dxo-selection mode="single"></dxo-selection>
    <dxi-column [width]="150" caption="Action" name="command-editing" [allowFiltering]="false"
      [allowSorting]="false" cellTemplate="cellTemplate">
      <div *dxTemplate="let data of 'cellTemplate'">
            <dx-menu (onItemClick)="permitProductsActionColClick($event,data)" [items]="permitProductMenuItems">

        </dx-menu>
      </div>
    </dxi-column>
    <dxi-column [width]="200" caption="Action" name="command-editing" [allowFiltering]="false"
    [allowSorting]="false" cellTemplate="cellTemplate2">
    <div *dxTemplate="let data of 'cellTemplate2'">
      <dx-button text="Uploads(Certificates)"  (click)="funcDownloadUploadedDocuments(data.data)" 
      type="success" icon="download" [elementAttr]="{ class: 'btn btn-primary' }">
      </dx-button>
    </div>
  </dxi-column>
    <dxi-column dataField="brand_name" caption="Brand Name"></dxi-column>
    <dxi-column dataField="quantity"></dxi-column>
    <dxi-column dataField="packaging_units"></dxi-column>
    <dxi-column dataField="pack_size" caption="Pack Size"></dxi-column>
    
    <dxi-column dataField="product_batch_no" caption="Product Batch #(License Permit)"></dxi-column>
    <dxi-column dataField="product_manufacturing_date" caption="Mgf Date"></dxi-column>
    <dxi-column dataField="product_expiry_date" caption="Product Expiry Date"></dxi-column>
    <dxi-column dataField="currency_name"></dxi-column>
    <dxi-column dataField="unit_price"></dxi-column>
    <dxi-column dataField="total_value" caption="FOB Value"></dxi-column>
    <dxo-paging [enabled]="true">
    </dxo-paging>
    <dxo-summary>
      <dxi-total-item
          column="total_value"
          summaryType="sum">
      </dxi-total-item>
  </dxo-summary>
    <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
    </dxo-pager>
    <dxo-export [enabled]="true" fileName="permitProducts" [allowExportSelectedData]="true"></dxo-export>
  </dx-data-grid>

  </div>
  <div class="col-lg-12" *ngIf="sub_module_id == 82">
    <dx-data-grid [dataSource]="permitProductsData" (onToolbarPreparing)="onPermitVisaLicenseProductGridToolbar($event)"  [allowColumnResizing]="true" [columnHidingEnabled]="false"  [wordWrapEnabled]="true" 
    [showBorders]="true">
    <dxo-filter-row [visible]="false"></dxo-filter-row>
    <dxo-search-panel [visible]="true">
    </dxo-search-panel>
    <dxo-paging [enabled]="true">
    </dxo-paging>
    <dxo-selection mode="single"></dxo-selection>
    
    <dxi-column [width]="200" caption="Action" name="command-editing" [allowFiltering]="false"
      [allowSorting]="false" cellTemplate="cellTemplate">
      <div *dxTemplate="let data of 'cellTemplate'">
        <dx-button text="Update Details(Batch/Quanties)" (click)="funcUpdateLicenseVisaprod(data.data)" 
        type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
        </dx-button>
      </div>
    </dxi-column>
    <dxi-column [width]="150" caption="Action" name="command-editing" [allowFiltering]="false"
      [allowSorting]="false" cellTemplate="cellTemplate2">
      <div *dxTemplate="let data of 'cellTemplate2'">
        <dx-button text="Remove product" (click)="funcREmoveProductDetails(data.data)" 
        type="success" icon="trash" [elementAttr]="{ class: 'btn btn-danger' }">
        </dx-button>
      </div>
    </dxi-column>
    <dxi-column [width]="200" caption="Action" name="command-editing" [allowFiltering]="false"
      [allowSorting]="false" cellTemplate="cellTemplate3">
      <div *dxTemplate="let data of 'cellTemplate3'">
        <dx-button text="Uploads(Certificates)"  (click)="funcDownloadUploadedDocuments(data.data)" 
        type="success" icon="download" [elementAttr]="{ class: 'btn btn-primary' }">
        </dx-button>
      </div>
    </dxi-column>
    <dxi-column dataField="brand_name" caption="Brand Name"></dxi-column>
    <dxi-column dataField="quantity"></dxi-column>
    <dxi-column dataField="packaging_units"></dxi-column>
    <dxi-column dataField="pack_size" caption="Pack Size"></dxi-column>
    <dxi-column dataField="product_batch_no" caption="Product Batch #(License Permit)"></dxi-column>
    <dxi-column dataField="product_manufacturing_date" caption="Mgf Date"></dxi-column>
    <dxi-column dataField="product_expiry_date" caption="Product Expiry Date"></dxi-column>
    <dxi-column dataField="currency_name"></dxi-column>
    <dxi-column dataField="unit_price"></dxi-column>
    <dxi-column dataField="total_value" caption="FOB Value"></dxi-column>
    <dxo-paging [enabled]="true">
    </dxo-paging>
    <dxo-summary>
      <dxi-total-item
          column="total_value"
          summaryType="sum">
      </dxi-total-item>
  </dxo-summary>
    <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
    </dxo-pager>
    <dxo-export [enabled]="true" fileName="permitProducts" [allowExportSelectedData]="true"></dxo-export>
  </dx-data-grid>

  </div>
</div>



<dx-popup class="popup"  [width]="funcpopWidth(80)" [height]="550" [showTitle]="true" title="Approved Visa Product Details" [dragEnabled]="false"  
  [closeOnOutsideClick]="false" [(visible)]="isApprovedVisaproductsPopupVisible">
  <div *dxTemplate="let data of 'content'">
    <dx-scroll-view>
          <dx-data-grid [dataSource]="approvedVisaProducts"  (onCellPrepared)="onVisaProductCellPrepared($event)"  [allowColumnResizing]="true" [columnHidingEnabled]="false" [wordWrapEnabled]="true" 
          [showBorders]="true">
          <dxo-filter-row [visible]="false"></dxo-filter-row>
          <dxo-search-panel [visible]="true">
          </dxo-search-panel>
          <dxo-selection mode="single"></dxo-selection>
          <dxi-column [width]="150" caption="Action(Edit/Delete)" name="command-editing" [allowFiltering]="false"
            [allowSorting]="false" cellTemplate="cellTemplate">
            <div *dxTemplate="let data of 'cellTemplate'">
              <dx-button text="Add/Select Product" (click)="funcSelectApprovedVisaProduct(data.data)"
            type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
          </dx-button>
            </div>
          </dxi-column>
          <dxi-column dataField="brand_name" caption="Brand Name"></dxi-column>
          <dxi-column dataField="quantity" caption="Visa Quantity"></dxi-column>
          
          <dxi-column dataField="visabalance_quantity" caption="Balance (Quantity)"></dxi-column>
          <dxi-column dataField="packaging_units"></dxi-column>
          <dxi-column dataField="pack_size" caption="Pack Size"></dxi-column>
          <dxi-column dataField="currency_name"></dxi-column>
          <dxi-column dataField="unit_price"></dxi-column>
          <dxi-column dataField="total_value" caption="FOB Value"></dxi-column>
          
          <dxi-column dataField="permitprod_recommendation" caption="Product Acceptance"></dxi-column>
          
          <dxo-paging [enabled]="true">
          </dxo-paging>
          <dxo-summary>
            <dxi-total-item
                column="total_value"
                summaryType="sum">
            </dxi-total-item>
        </dxo-summary>
          <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
          </dxo-pager>
          <dxo-export [enabled]="true" fileName="permitProducts" [allowExportSelectedData]="true"></dxo-export>
        </dx-data-grid>


    </dx-scroll-view>
  </div>
</dx-popup>


<dx-popup class="popup"  [width]="funcpopWidth(80)" [height]="550" [showTitle]="true" title="Permits Products" [dragEnabled]="false"
  [closeOnOutsideClick]="false" [(visible)]="isPermitproductsPopupVisible">
  <div *dxTemplate="let data of 'content'">
    <dx-scroll-view>
    <div class="row no-padding">
      <div class="col-lg-12 ">
        <dx-data-grid [dataSource]="registeredProductsData"  [height]="500" [remoteOperations]='true' 
          (onToolbarPreparing)="onRegisteredProductGridToolbar($event)"  [wordWrapEnabled]="true"  [columnHidingEnabled]="false"  [showBorders]="true">
          <dxo-filter-row [visible]="false"></dxo-filter-row>
          <dxo-search-panel [visible]="true">
          </dxo-search-panel>
          <dxo-paging [enabled]="true">
          </dxo-paging>
          <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
          </dxo-pager>
          
          <dxo-selection mode="single"></dxo-selection>
          <dxi-column [width]="150" caption="Action" name="command-editing" [allowFiltering]="false"
          [allowSorting]="false" cellTemplate="cellTemplate">
          <div *dxTemplate="let data of 'cellTemplate'">
            <dx-button text="Select Product Details" (click)="funcSelectRegisteredProduct(data)"
            type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
          </dx-button>
          </div>
        </dxi-column>
          <dxi-column dataField="brand_name" caption="Brand Name"></dxi-column>
          <dxi-column dataField="certificate_no"></dxi-column>
          <dxi-column dataField="common_name" caption="Common Name/INN Name/API"></dxi-column>
          <dxi-column dataField="retention_status"></dxi-column>
          <dxi-column dataField="validity_status"></dxi-column>
        <dxo-paging [pageSize]="25"></dxo-paging> 
          <dxo-export [enabled]="true" fileName="permitProducts" [allowExportSelectedData]="true"></dxo-export>

        </dx-data-grid>
      </div>
    </div>
  </dx-scroll-view>
  </div>
</dx-popup>

<dx-popup class="popup"  [width]="funcpopWidth(80)" height="funcpopHeight(60)" [showTitle]="true" title="Permit Products Details"
  [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isPermitproductsAddPopupVisible">
  <div *dxTemplate="let data of 'content'">

    <dx-scroll-view>
      
        <dx-tab-panel (onItemClick)="onPermitsProductsTabCLick($event)">
            <dxi-item title="Products Details" icon="rowfield">
                <div *dxTemplate>
                    <div class="row col-lg-12">
          <form role="form" class="row" enctype="multipart/form-data" role="form" [formGroup]="permitProductsFrm"
          (ngSubmit)="onsavePermitProductdetails()">
                <div class="col-lg-12 row row-no-margin ">
                  <div class="col-lg-3 ">
                    <label>Product Name</label>
                    <dx-text-box placeholder="Brand Name/Devices Name" [readOnly]="is_brandreadonly" formControlName="brand_name">
                    </dx-text-box>
                  </div>
                  <div class=" col-xs-12 col-md-6 col-lg-6 col-xl-6 input-group">
                    <div class="col-lg-8">
                        <label class="control-label">{{common_name_title}}</label>
                        <dx-select-box [dataSource]="commonNameData" valueExpr="id" displayExpr="name" 
                        [searchEnabled]="true" formControlName="common_name_id">
                        </dx-select-box>
                    </div>
                    <div class="col-lg-4">
                        
                        <dx-button
                            text="Add"
                            type="success"
                            icon="fa fa-plus"
                            [disabled] ="is_brandreadonly"
                            [elementAttr]="{  class: 'pull-left' }"
                            (onClick)="onAddNewGenericDetails()">
                        </dx-button>
                  </div>
                </div>

                
                <div class="col-lg-6" >
                  <label>Product Classification</label>
                  <dx-select-box [dataSource]="classificationData" valueExpr="id" [readOnly]="is_brandreadonly" placeholder="Select Category" 
                    displayExpr="name" formControlName="productclassification_id" [searchEnabled]="true">
                  </dx-select-box>
                </div>
                
                  <div class="col-lg-6"  *ngIf="isFoodPermitProducts">
                    <label>Product Category</label>
                    <dx-select-box [dataSource]="productCategoryData" valueExpr="id" [readOnly]="is_brandreadonly" placeholder="Select Category" 
                      displayExpr="name" formControlName="product_category_id" [searchEnabled]="true">
                    </dx-select-box>
                  </div>
                  <div class="col-lg-6"  *ngIf="requireUnitPackData">
                    <label>Product Strength</label>
                    <dx-text-box placeholder="Product Stength"   formControlName="product_strength">
                    </dx-text-box>
                  </div>
                
                  <div class="col-lg-6"  *ngIf="isFoodPermitProducts">

                    <label>Product Sub-Category</label>
                    <dx-select-box [dataSource]="productSubCategoryData"  (onSelectionChanged)="onProductCategoryCboSelect($event)" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                    placeholder=" Sub-Product Category" formControlName="product_subcategory_id">
                  </dx-select-box>
                  </div>

                  <div class="col-lg-6 " *ngIf="device_type_visible">
                    <label>Device Type</label>
                    <dx-select-box [dataSource]="deviceTypeData" valueExpr="id" placeholder="Select device Type"
                      displayExpr="name" formControlName="device_type_id" [searchEnabled]="true">
                    </dx-select-box>
                  </div>
                  
                  <div class="col-lg-6">
                    <label>Pack Size</label>
                    <dx-text-box placeholder="Unit Pack Size"   formControlName="unitpack_size">
                    </dx-text-box>
                  </div>
                  
                  <div class=" col-xs-12 col-md-4 col-lg-6 col-xl-6 input-group">
                    <div class="col-lg-10">
                        <label class="control-label">Manufacturer</label>
                        <dx-text-box  formControlName="manufacturer_name" readOnly=true [showClearButton]="true">
            
                        </dx-text-box>
                    </div>    
                    <div class="col-lg-2">
                      <dx-button  [elementAttr]="{ class: 'btn btn-primary pull-left'}" style="margin-top:25px  !important;"  text="Search Manufacturing Details"  type="default" (onClick)="funcSearchManufacturingSite()">
                          <i class="fa fa-search"></i>Search Details
                      </dx-button>
                    </div>
                  </div> 
                  <div class="col-lg-6 ">
                    <label>Country of Origin</label>
                    <dx-select-box [dataSource]="countries" readOnly=true valueExpr="id" placeholder="Select Country" displayExpr="name"
                      [searchEnabled]="true" formControlName="country_oforigin_id">
                    </dx-select-box>
                  </div>
                  <div class="col-lg-12 " *ngIf="!is_visaapplication">
                    <label>Product Batch No(s)</label>
                    <dx-text-box placeholder="Batch Nos" formControlName="product_batch_no">
                    </dx-text-box>
                  </div>
                  <div class="col-lg-6 input-group" *ngIf="!is_visaapplication">
                    <div class="col-lg-6"> 
                      <label>Manufacturing Date</label>
                      <dx-date-box  dateSerializationFormat = "yyyy-MM-dd" placeholder="Manufacturing Date" formControlName="product_manufacturing_date">
                      </dx-date-box>
                    </div>
                    <div class="col-lg-6"> 
                      <label>Expiry Date</label>
                      <dx-date-box  dateSerializationFormat = "yyyy-MM-dd" placeholder="Expiry Date" formControlName="product_expiry_date">
                      </dx-date-box>
                    </div>

                  </div>
                  <div class="col-lg-6 input-group">
                    <div class="col-lg-6">
                      <label>Item Quantity</label>
                      <dx-number-box placeholder="Item Quantity"  [value]="quantity"   formControlName="quantity">
                      </dx-number-box>
                    </div>
                    <div class="col-lg-6">
                      <label>Packaging Unit</label>
                      <dx-select-box [dataSource]="packagingUnitsData" valueExpr="id" placeholder="Select Packaging Units"
                        displayExpr="name" formControlName="packaging_unit_id" [searchEnabled]="true">
                      </dx-select-box>
                  </div>
                </div>
                <div class="col-lg-6 input-group"  *ngIf="isFoodPermitProducts">
                  <div class="col-lg-6">
                    <label>Total Weight</label>
                    <dx-number-box placeholder="Total weight"  [value]="total_weight"  formControlName="total_weight">
                    </dx-number-box>
                  </div>
                  <div class="col-lg-6">
                    <label>Weights Unit</label>
                    <dx-select-box [dataSource]="weightsUnitData" valueExpr="id" placeholder="Select Weights Units"
                      displayExpr="name" formControlName="weights_units_id" [searchEnabled]="true">
                    </dx-select-box>
                </div>
              </div>
                  <div class="col-lg-6 input-group">
                    <div class="col-lg-6"> 
                      <label>Unit Price</label>
                      <dx-number-box placeholder="Unit Price" formControlName="unit_price">
                      </dx-number-box>
                    </div>
                    <div class="col-lg-6 ">
                      <label>Currency</label>
                      <dx-select-box [dataSource]="currencyData" valueExpr="id" placeholder="Select Currency" displayExpr="name"
                        [searchEnabled]="true" formControlName="currency_id">
                      </dx-select-box>
                    </div>
                  </div>
                  <div class="col-lg-12">
                          <label class="control-label">Product Physical Description</label>
                          <dx-text-area [height]="60" formControlName="productphysical_description" [readOnly]= "isReadOnly" placeholder="Physical description"
                            >
                          </dx-text-area>
                  </div>

                  <div class="col-lg-12 ">
                    <input type="hidden" formControlName="id" />
                    <input type="hidden" formControlName="product_id" />
                    <input type="hidden" formControlName="visa_quantity" />
                    <input type="hidden" formControlName="prodcertificate_no" />
                  </div>
                  <dx-button text="Save Products Details" [disabled]="!permitProductsFrm.valid"
                    (onClick)="onsavePermitProductdetails()" type="success" icon="save"
                    [elementAttr]="{ class: 'btn btn-primary; pull-right' }">
                  </dx-button>
                </div>
              </form>
            </div>
                </div>
            </dxi-item>
        
            <dxi-item title="Supporting Documents(Certificate of Analysis/ Certificate of Conformity/ Health Certificate/ Sanitary certificate )(Optional)" icon="rowfield">
              <div *dxTemplate>
                <app-application-documents  [document_type_id] ="document_type_id"  [permit_product_id] ="permit_product_id"  [section_id] ="section_id"  [module_id] ="module_id" [status_id] ="status_id" [sub_module_id] ="sub_module_id" [application_code] ="application_code"></app-application-documents>
              </div>
          </dxi-item>
        
        </dx-tab-panel>

    </dx-scroll-view>
    </div>
    </dx-popup>
   
<dx-popup class="popup"  [width]="funcpopWidth(80)" height="funcpopHeight(60)" [showTitle]="true" title="Permit Products Details"
[dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isPermitVisaLicProductsAddPopupVisible">
<div *dxTemplate="let data of 'content'">

  <dx-scroll-view>
    <dx-tab-panel  (onItemClick)="onPermitsProductsTabCLick($event)">
      <dxi-item title="Products Details" icon="rowfield">
          <div *dxTemplate>
            <div class="row col-lg-12">
              <form role="form" class="row" enctype="multipart/form-data" role="form" [formGroup]="permitProductsFrm"
              (ngSubmit)="onsavePermitProductdetails()">
              <div class="col-lg-12 row row-no-margin ">
                <div class="col-lg-6 ">
                  <label>Product Name</label>
                  <dx-text-box placeholder="Brand Name/Devices Name" [readOnly]="true" formControlName="brand_name">
                  </dx-text-box>
                </div>
                <div class="col-lg-6">
                    <label class="control-label">{{common_name_title}}</label>
                    <dx-select-box [dataSource]="commonNameData" valueExpr="id" [readOnly]="true" displayExpr="name" 
                    [searchEnabled]="true" formControlName="common_name_id">
                    </dx-select-box>
                </div>
                
                <div class="col-lg-6">
                  <label>Product Unit Pack Size</label>
                  <dx-text-box placeholder="Unit Pack Size"   formControlName="unitpack_size">
                  </dx-text-box>
                </div>
                
                <div class="col-lg-12 ">
                  <label>Product Batch No(s)</label>
                  <dx-text-box placeholder="Batch Nos" formControlName="product_batch_no">
                  </dx-text-box>
                </div>
                <div class="col-lg-6 input-group" >
                  <div class="col-lg-6"> 
                    <label>Manufacturing Date</label>
                    <dx-date-box dateSerializationFormat = "yyyy-MM-dd"  placeholder="Manufacturing Date" formControlName="product_manufacturing_date">
                    </dx-date-box>
                  </div>
                  <div class="col-lg-6"> 
                    <label>Expiry Date</label>
                    <dx-date-box dateSerializationFormat = "yyyy-MM-dd"  placeholder="Expiry Date" formControlName="product_expiry_date">
                    </dx-date-box>
                  </div>
      
                </div>
                <div class="col-lg-6 input-group">
                  <div class="col-lg-6">
                    <label>Item Quantity</label>
                    <dx-number-box placeholder="Item Quantity"  [value]="quantity"   formControlName="quantity">
                    </dx-number-box>
                  </div>
                  <div class="col-lg-6">
                    <label>Packaging Unit</label>
                    <dx-select-box [dataSource]="packagingUnitsData" valueExpr="id" placeholder="Select Packaging Units"
                      displayExpr="name" formControlName="packaging_unit_id" [searchEnabled]="true">
                    </dx-select-box>
                </div>
              </div>
              <div class="col-lg-6 input-group"  *ngIf="isFoodPermitProducts">
                <div class="col-lg-6">
                  <label>Total Weight</label>
                  <dx-number-box placeholder="Total weight"  [value]="total_weight"  formControlName="total_weight">
                  </dx-number-box>
                </div>
                <div class="col-lg-6">
                  <label>Weights Unit</label>
                  <dx-select-box [dataSource]="weightsUnitData" valueExpr="id" placeholder="Select Weights Units"
                    displayExpr="name" formControlName="weights_units_id" [searchEnabled]="true">
                  </dx-select-box>
              </div>
            </div>
                <div class="col-lg-6 input-group">
                  <div class="col-lg-6"> 
                    <label>Unit Price</label>
                    <dx-number-box placeholder="Unit Price" formControlName="unit_price">
                    </dx-number-box>
                  </div>
                  <div class="col-lg-6 ">
                    <label>Currency</label>
                    <dx-select-box [dataSource]="currencyData" valueExpr="id" placeholder="Select Currency" displayExpr="name"
                      [searchEnabled]="true" formControlName="currency_id">
                    </dx-select-box>
                  </div>
                </div>
                <div class="col-lg-12 ">
                  
                  <input type="hidden" formControlName="id" />
                  <input type="hidden" formControlName="product_id" />
                  <input type="hidden" formControlName="visa_quantity" />
                  <input type="hidden" formControlName="prodcertificate_no" />
                </div>
                <dx-button text="Save Products Details" [disabled]="!permitProductsFrm.valid"
                  (onClick)="onsavePermitProductdetails()" type="success" icon="save"
                  [elementAttr]="{ class: 'btn btn-primary; pull-right' }">
                </dx-button>
              </div>
            </form>
          </div>
          </div>
      </dxi-item>
  
      <dxi-item title="Supporting Documents(Certificate of Analysis/ Certificate of Conformity/ Health Certificate/ Sanitary certificate )(Optional)" icon="rowfield">
        <div *dxTemplate>
          <app-application-documents  [document_type_id] ="document_type_id"  [permit_product_id] ="permit_product_id"  [section_id] ="section_id"  [module_id] ="module_id" [status_id] ="status_id" [sub_module_id] ="sub_module_id" [application_code] ="application_code"></app-application-documents>
        </div>
    </dxi-item>
  
  </dx-tab-panel>

  </dx-scroll-view>
  </div>
  </dx-popup>
<dx-popup class="popup"  [width]="funcpopWidth(40)" [height]="400" [showTitle]="true" title="Add Details" [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="addproductCommonNameModal">
  
  <div *dxTemplate="let data of 'content'" >
  <dx-scroll-view>
        <form [formGroup]="addProductParamsdetailsfrm" class="col-lg-12  div-nopadding" style="background: #fff;" enctype="multipart/form-data" role="form" (ngSubmit)="onSaveNewGenericDetails()">
            <div class="col-lg-12">
              <label class="control-label">Name</label>
              <dx-text-box formControlName="name" placeholder="name" [showClearButton]="true">
              </dx-text-box>
            </div>
            <div class="col-lg-12">
              <label class="control-label">Description</label>
              <dx-text-area formControlName="description" placeholder="description" >
              </dx-text-area>
            </div>
            <input type='hidden' value='{{section_id}}' formControlName="section_id"/>
            <input type='hidden' value = 'par_common_names' formControlName="tablename"/>

            <div class="col-lg-12">
                <dx-button
                    text="Save Details"
                    type="success"
                    icon="fa fa-plus"
                    [elementAttr]="{  class: 'pull-left' }"
                    (onClick)="onSaveNewGenericDetails()">
                </dx-button>
              </div>
          </form>
        </dx-scroll-view>
  </div>
</dx-popup>


<dx-popup class="popup" [width]="funcpopWidth(65)" [height]=620 [showTitle]="true" title="Add Manufacturer" [dragEnabled]="false" [closeOnOutsideClick]="" [(visible)]="isnewmanufacturerModalShow">
  
  <div *dxTemplate="let data of 'content'" class="row">
    <dx-scroll-view>
      <div class="col-lg-12">
          <form enctype="multipart/form-data" role="form" [formGroup]="manufacturerFrm" (ngSubmit)="onAddManufacturerDetails()">

              <div class="row">

                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">

                      <label class="control-label">FPP Manufacturer</label>
                      <dx-text-box formControlName="name">
                      </dx-text-box>

                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label class="control-label">Country</label>

                      <dx-select-box [dataSource]="countries" valueExpr="id" displayExpr="name" placeholder="Select Country" (onSelectionChanged)="onCoutryCboSelect($event)" [searchEnabled]="true" formControlName="country_id">
                      </dx-select-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Region/City (Optional)</label>

                      <dx-select-box [dataSource]="regions" valueExpr="id" displayExpr="name" [searchEnabled]="true" formControlName="region_id">
                      </dx-select-box>

                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Email Address</label>
                      <dx-text-box formControlName="email_address" placeholder="Email Address">
                      </dx-text-box>
                  </div>
                  <div class="col-xs-12 col-md-6 col-lg-6 col-xl-6">
                      <label for="ti" class="control-label">Postal Address</label>
                      <dx-text-box formControlName="postal_address" placeholder="Postal Address">
                      </dx-text-box>
                  </div>
                  <div class="col-lg-12">
                    <label class="control-label">Physical Address</label>

                    <dx-text-area [height]="60" formControlName="physical_address" placeholder="Physical Address">
                    </dx-text-area>
                </div>
                  <div class="col-lg-12 btn-margin-5">
                      <br />
                      <button type="submit" (submit)="onAddManufacturerDetails()" [disabled]="!manufacturerFrm.valid" class="btn btn-primary"><i
                        class="fa fa-user"></i> Save Manufacturer</button>
                  </div>
              </div>
          </form>
      </div>
    </dx-scroll-view>
  </div>
</dx-popup>


<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="600" [showTitle]="true" title="Manufacturing Site Details"
[dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isManufacturerSitePopupVisible">
<div *dxTemplate="let data of 'content'">
  <dx-scroll-view>
      <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true" [wordWrapEnabled]="true"   [columnHidingEnabled]="true"   (onToolbarPreparing)="onManufacturerPreparing($event)" [dataSource]="manufacturersData" [remoteOperations]='true'   keyExpr="id">
                <dxo-filter-row [visible]="false"></dxo-filter-row>
                <dxo-search-panel [visible]="true">
                </dxo-search-panel>
                <dxo-paging [enabled]="true">
                </dxo-paging>
                <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
                </dxo-pager>
                <dxo-export [enabled]="true" fileName="manufacturingFile" [allowExportSelectedData]="true"></dxo-export>
                <dxo-selection mode="single"></dxo-selection>
                <dxo-group-panel [visible]="true"></dxo-group-panel>
                <dxi-column [width]="150" caption="Action" name="command-editing" [allowFiltering]="false" [allowSorting]="false" cellTemplate="cellTemplate">
                    <div *dxTemplate="let data of 'cellTemplate'">
                        
                        <dx-button text="Select Manufacturer" (click)="funcSelectManufacturer(data)"
                        type="success" icon="edit" [elementAttr]="{ class: 'btn btn-primary' }">
                      </dx-button>
                    </div>
                </dxi-column>
                <dxi-column dataField="manufacturer_name"></dxi-column>
                <dxi-column dataField="country"></dxi-column>
                <dxi-column dataField="region"></dxi-column>
                <dxi-column dataField="district"></dxi-column>
                <dxi-column dataField="physical_address"></dxi-column>
                <dxi-column dataField="postal_address"></dxi-column>
                <dxi-column dataField="email_address"></dxi-column>
              
            <dxo-paging [pageSize]="50"></dxo-paging>
      </dx-data-grid>
    </dx-scroll-view>
  </div>
</dx-popup>

<dx-popup class="popup" [width]="funcpopWidth(80)" [height]="450" [showTitle]="true" title="Document Preview" [dragEnabled]="false"
  [closeOnOutsideClick]="true" [(visible)]="isDocumentPreviewDownloadwin">
  <div *dxTemplate="let data of 'content'" class="row">
        
      <dx-scroll-view>
            <app-application-documents  [document_type_id] ="document_type_id"  [permit_product_id] ="permit_product_id"  [section_id] ="section_id"  [module_id] ="module_id" [status_id] ="status_id" [sub_module_id] ="sub_module_id" [application_code] ="application_code"></app-application-documents>
      </dx-scroll-view>
  </div>
</dx-popup>


<dx-popup class="popup" [width]="funcpopWidth(90)" [height]="600" [showTitle]="true" title="Uploaded Invoice details " [dragEnabled]="false"
  [closeOnOutsideClick]="true" [(visible)]="isUploadedInvoiceProductsWin">
  <div *dxTemplate="let data of 'content'" class="row">
        
      <dx-scroll-view>
        <dx-data-grid [dataSource]="permitUploadedProductsData"  [wordWrapEnabled]="true"  (onToolbarPreparing)="onPermitUploadProductGridToolbar($event)"  [allowColumnResizing]="true" [columnHidingEnabled]="false" 
        [showBorders]="true">
        <dxo-filter-row [visible]="false"></dxo-filter-row>
        <dxo-search-panel [visible]="true">
        </dxo-search-panel>
        <dxo-paging [enabled]="true">
        </dxo-paging>
        <dxo-selection mode="single"></dxo-selection>
        <dxi-column dataField="Syncronisation Status" caption="syncronisation_status"></dxi-column>
        <dxi-column dataField="brand_name" caption="Brand Name"></dxi-column>
        <dxi-column dataField="product_registration_no" caption="Certificate No"></dxi-column>
        
        <dxi-column dataField="unitpack_size" caption="Pack Size"></dxi-column>

        <dxi-column dataField="quantity"></dxi-column>
        <dxi-column dataField="packaging_units"></dxi-column>
        

       <!-- <dxi-column dataField="product_batch_no" caption="Product Batch #(License Permit)"></dxi-column>
        <dxi-column dataField="product_manufacturing_date" caption="Mgf Date"></dxi-column>
        <dxi-column dataField="product_expiry_date" caption="Product Expiry Date"></dxi-column>-->

        <dxi-column dataField="currency_name"></dxi-column>
        <dxi-column dataField="unit_price"></dxi-column>
        <dxi-column dataField="total_value" caption="FOB Value"></dxi-column>
        <dxo-paging [enabled]="true">
        </dxo-paging>
        <dxo-summary>
          <dxi-total-item
              column="total_value"
              summaryType="sum">
          </dxi-total-item>
        </dxo-summary>
        <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
        </dxo-pager>
        <dxo-export [enabled]="true" fileName="permitProducts" [allowExportSelectedData]="true"></dxo-export>
        </dx-data-grid>
  
</dx-scroll-view>
</div>
</dx-popup>


<dx-popup class="popup"  [width]="funcpopWidth(80)" [height]="700" [showTitle]="true" title="{{printReportTitle}}"
[dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="isPrintReportVisible">
<div *dxTemplate="let data of 'content'">
    <div class="col-lg-12 row" [innerHTML]="printiframeUrl | safe: 'html'"></div>
</div>
</dx-popup>

<dx-popup class="popup" [width]="500" [height]="400" [showTitle]="true" title="Upload Option (Invoice Products)"
  [dragEnabled]="false" [closeOnOutsideClick]="false" [(visible)]="isInvoiceProductsUploadVisable">
  <div *dxTemplate="let data of 'content'">
    <form role="form" class="row" enctype="multipart/form-data" role="form" [formGroup]="invoiceProductsUploadFrm"
      (ngSubmit)="onunInvoiceProductsUpload()">
      
      <div class="col-lg-12">
        <div class="col-lg-12">
          <label>Upload Filled Form(Excel)</label>
          <input type="file" class="form-control" (change)="fileChangeEvent($event)" />
        </div>
      </div>
      <div class="col-lg-12">
        <label>Invoice Currency</label>
        <dx-select-box [dataSource]="currencyData" valueExpr="id" placeholder="Select Currency" displayExpr="name"
          [searchEnabled]="true" formControlName="currency_id">
        </dx-select-box>
      </div>
      <div class="col-lg-12">
        <label>Description</label>
        <dx-text-area [height]="60" formControlName="description"  placeholder="Description"
          [(value)]="value">
        </dx-text-area>
      </div>
      <div class="col-lg-12">
        <dx-button text="Upload Excel Document" [disabled]="!invoiceProductsUploadFrm.valid" (onClick)="onunInvoiceProductsUpload()" type="success" icon="save" [elementAttr]="{ class: 'btn btn-primary; pull-right' }">
        </dx-button>
      </div>
    </form>
  </div>
</dx-popup>