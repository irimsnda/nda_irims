
 <div class="card">
    <div class="card-header" id="headingThree">

      <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#packaging_information"
        aria-expanded="false" aria-controls="packaging_information">
        Packaging Information(expand to fill in the product packaging)
      </button>

    </div>
    <div id="packaging_information" class="collapse" aria-labelledby="headingThree" data-parent="#productInfo">
      <div class="card-body no-padding">

        <div class="no-padding">
          <dx-data-grid class="table row-border hover"  [allowColumnResizing]="true"  [columnHidingEnabled]="false" (onToolbarPreparing)="onProdPackagingPreparing($event)"
            [dataSource]="drugsPackagingData" keyExpr="id">
            <dxo-filter-row [visible]="false"></dxo-filter-row>
            <dxo-search-panel [visible]="true">
            </dxo-search-panel>
            <dxo-paging [enabled]="true">
            </dxo-paging>
            <dxo-pager [showInfo]="true" infoText="Page #{0}. Total: {1} ({2} items)">
            </dxo-pager>
            <dxo-export [enabled]="true" fileName="packagingFile" [allowExportSelectedData]="true"></dxo-export>

            
            <dxo-group-panel [visible]="true"></dxo-group-panel>
            <dxi-column  [width]="200" caption="Action" name="command-editing" [allowFiltering]="false"
              [allowSorting]="false" cellTemplate="cellTemplate">
              <div *dxTemplate="let data of 'cellTemplate'">
               
                    <dx-button text="Edit" (click)="funcEditPackagingDetails(data)" 
                      type="success" icon="edit">
                      </dx-button> 
                  <dx-button text="Delete" (click)="funcDeletePackDetails(data)" 
                      type="danger" icon="delete">
                  </dx-button> 
              </div>
            </dxi-column>
            <dxi-column dataField="prim_container" caption ="Primary Container Type"></dxi-column>
            <dxi-column dataField="container_materials"caption ="Primary Container Materials"></dxi-column>
            <dxi-column dataField="no_of_units"caption ="No of Units per Primary Pack"></dxi-column>
            <dxi-column dataField="no_of_packs"caption ="No of primary per Secondary Pack"></dxi-column>
            <dxi-column dataField="strength"caption ="Strength"></dxi-column>
            <dxi-column dataField="si_units"caption ="SI Unit"></dxi-column>
            <dxi-column dataField="description_of_packaging" caption ="Primary Description"></dxi-column>
            <dxi-column dataField="secondary_container" caption ="Secondary Container Type"></dxi-column>
            <dxi-column dataField="secondary_container_materials"caption ="Secondary Container Materials"></dxi-column>
            <dxi-column dataField="secondary_description_of_packaging" caption ="Secondary Description"></dxi-column>
             <dxi-column dataField="pack_size"></dxi-column>
          </dx-data-grid>
        </div>
      </div>
    </div>
  </div>

<dx-popup  class="popup" [width]="1150" [height]="500" [showTitle]="true" title="Packaging Details"
    [dragEnabled]="false" [closeOnOutsideClick]="false" [dragEnabled]="false" [closeOnOutsideClick]="true" [(visible)]="productPackagingModal">
    <div *dxTemplate="let data of 'content'">
      <dx-scroll-view>
    <wizard [navigationMode]='strict' style="background: #fff !important; height: 100% !important;"  navBarLayout ="large-filled-symbols">
       <wizard-step navigationSymbol="Step 1" stepTitle="Primary Packaging" class="wizardStep-height">
          <div class="col-lg-12 wizard-content">
            <form [formGroup]="primaryPackagingdetailsfrm" (submit)="onSaveProductPackaging()"
               enctype="multipart/form-data"
              role="form">
              <div class="col-lg-12 form-group " style="margin:1px;">
                <label class="control-label">Primary Container Type</label>
                <dx-select-box [dataSource]="containerData" valueExpr="id" displayExpr="name" [searchEnabled]="true"(onValueChanged)="onContainerTypeDetails($event)"
                  placeholder=" Container" formControlName="container_id">
                </dx-select-box>
              </div>
              <div class="col-lg-12 form-group " style="margin:1px;">
                <label class="control-label">Primary Container Material</label>
                <dx-select-box [dataSource]="containerMaterialData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                  placeholder="Container Materials" formControlName="container_material_id">
                </dx-select-box>
              </div>
              <div class="col-lg-12 form-group" style="margin:1px;">
                <label class="control-label col-lg-12">No of Units on the Primary Pack</label>
                
                <dx-text-box formControlName="no_of_units" [showClearButton]="true">
                </dx-text-box>
              </div> 
              <div class="col-lg-12 form-group"*ngIf="is_container_type_vial">
                <label class="control-label col-lg-12">Strength</label>
                <dx-text-box formControlName="product_strength" [showClearButton]="true">
                </dx-text-box>
              </div> 
              <div class="col-lg-12" style="margin:1px;">
                <label class="control-label">SI Unit</label>
                  <dx-select-box [dataSource]="siUnitsData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                  placeholder="SI Unit" formControlName="si_unit_id">
                </dx-select-box>

              </div>
              <div class="col-lg-12" >
                  <label class="control-label">Description of the packaging
                </label>
                  <textarea  (input)="adjustTextAreaHeight($event)"formControlName="description_of_packaging"  class="custom-textarea">
                  </textarea>
                  <input type="hidden" value="1"formControlName ="container_type_id" />
                </div>

              <div class="col-lg-12">
                <button type="submit" (submit)="onSaveProductPackaging()" [disabled]="!primaryPackagingdetailsfrm.valid"
                  class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save
                  Packaging Details</button>
              </div>
            </form>   
          </div>
        </wizard-step>
        <wizard-step navigationSymbol="Step 2" stepTitle="Secondary Packaging" class="wizardStep-height">
          <div class="col-lg-12 wizard-content">
            <form [formGroup]="secondaryPackagingdetailsfrm" (submit)="onSaveSecondaryPackaging()"
               enctype="multipart/form-data"
              role="form">
              <div class="col-lg-12 form-group " style="margin:1px;">
                <label class="control-label">Secondary Packaging Container Type</label>

                <dx-select-box [dataSource]="containerData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                  placeholder=" Container" formControlName="containers_id">
                </dx-select-box>
              </div>
              <div class="col-lg-12 form-group " style="margin:1px;">
                <label class="control-label">Secondary Packaging Container Material</label>

                <dx-select-box [dataSource]="containerMaterialData" valueExpr="id" displayExpr="name" [searchEnabled]="true"
                  placeholder="Container Materials" formControlName="containers_material_id">
                </dx-select-box>
              </div>
              <div class="col-lg-12 form-group">
                <label class="control-label col-lg-12"> No of Primary Pack in the Secondary Pack</label>
                <dx-text-box formControlName="no_of_packs" [showClearButton]="true">
                </dx-text-box>
              </div>
              <div class="col-lg-12" >
                  <label class="control-label">Description of the packaging
                </label>
                  <textarea  (input)="adjustTextAreaHeight($event)"formControlName="secondary_description_of_packaging"  class="custom-textarea">
                  </textarea>
                  <input type="hidden" value="2" formControlName="containers_type_id" />
                </div>
              <div class="col-lg-12">
                <button type="button" class="btn btn-primary  pull-left" style="margin:5px;" previousStep><i
                    class="fa fa-angle-double-left"></i>previous
                  </button>
                <button type="submit" (submit)="onSaveSecondaryPackaging()" [disabled]="!secondaryPackagingdetailsfrm.valid"
                  class="btn btn-primary  pull-right" style="margin:5px;"><i class="fa fa-save"></i>&nbsp;Save
                  Packaging Details</button>
              </div>
            </form>   
          </div>
        </wizard-step>
  </wizard>
</dx-scroll-view>
</div>
</dx-popup>
 